<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.proj.pots.party.dao.IPartyViewDAO">
	 
	 <resultMap type="com.proj.pots.party.dto.PartyRegDTO" id="PartyRegDTO">
	 	<result column="party_num" property="party_num" />
	 	<result column="id" property="id" />
	 	<result column="party_title" property="party_title" />
	 </resultMap>
	 
	 <resultMap type="com.proj.pots.party.dto.PartyCommentDTO" id="PartyCommentDTO">
	 	<result column="no_cmnt" property="no_cmnt" />
	 	<result column="party_num" property="party_num" />
	 	<result column="nick" property="nick" />
	 	<result column="comment" property="comment" />
	 	<result column="comment_date" property="comment_date" />
	 	<!-- <collection property="PartyRegDTO" resultMap="PartyRegDTO" /> -->
	 </resultMap>
	 
	 
	 
	 <select id="comment" parameterType="String" resultMap="PartyCommentDTO">
	 	SELECT a.nick, a.comment_date, a.comment, a.comment_private, b.party_title
	 	FROM party_comment as a
	 	JOIN party as b
	 	ON a.party_num = b.party_num AND b.id = 'admin' <!-- id 세션 값 --> 
	 	ORDER BY comment_date DESC 
	 </select>
	
</mapper>